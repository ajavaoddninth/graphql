(this["webpackJsonpgraphql-client"]=this["webpackJsonpgraphql-client"]||[]).push([[0],{117:function(e,t,n){e.exports=n(132)},131:function(e,t,n){},132:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(15),l=n.n(o),c=n(19),i=n(163),m=n(177),u=n(178),s=n(76),d=n(168),p=n(184),y=n(135),f=n(166),I=n(179),v=n(9),b=n(20);function g(){var e=Object(b.a)(["\n    query GetEmployeeByUserName($userName: String!) {\n        employeeByUserName(userName: $userName) {\n            id\n            companyId\n            firstName\n            lastName\n        }\n    }\n"]);return g=function(){return e},e}var E=Object(v.gql)(g()),O=Object(i.a)((function(e){return{login:{padding:e.spacing(2),margin:"auto",marginTop:100,maxWidth:500}}}));function j(e){var t=e.setEmployee,n=e.displayError,o=Object(a.useState)(""),l=Object(c.a)(o,2),i=l[0],m=l[1],u=Object(a.useState)(""),s=Object(c.a)(u,2),p=s[0],b=s[1],g=O(),j=Object(v.useLazyQuery)(E,{fetchPolicy:"no-cache"}),h=Object(c.a)(j,2),$=h[0],C=h[1],P=C.data,N=C.error;return Object(a.useEffect)((function(){P&&P.employeeByUserName&&t(P.employeeByUserName),N&&("Invalid username"!==N.message?n(N):b(N.message))}),[P,t,N,n,b]),r.a.createElement(y.a,{className:g.login},r.a.createElement(f.a,{container:!0,spacing:3,alignItems:"center",justify:"center"},r.a.createElement(f.a,{item:!0,xs:12},r.a.createElement(I.a,{error:!!p,id:"user-name",label:"Username",variant:"outlined",helperText:p||" ",fullWidth:!0,onChange:function(e){b(""),m(e.target.value)},value:i})),r.a.createElement(f.a,{item:!0,xs:12,container:!0,alignItems:"center",justify:"center"},r.a.createElement(d.a,{variant:"contained",onClick:function(){i?$({variables:{userName:i}}):b("Username cannot be empty")}},"Login"))))}var h=n(180),$=n(185),C=n(171),P=n(176),N=n(167),B=n(174),D=n(169),w=n(170),x=n(181),q=n(172),k=n(173),S=Object(i.a)((function(e){return{progress:function(e){var t=e.total,n=e.tally,a=t>0?Math.floor(n/t*100):0;return{padding:10,borderRadius:3,margin:0,background:"linear-gradient(90deg, rgba(150, 150, 150, 0.6) ".concat(a,"%, #FFFFFF ").concat(a,"%)")}}}}));function U(e){var t=S(e),n=e.id,a=e.option,o=e.tally,l=e.selected,c=e.canDelete,i=e.deletePollOption,m=e.vote,u=e.unvote;return r.a.createElement(D.a,{button:!0,onClick:function(){l?u():m(n)},selected:l},r.a.createElement(w.a,null,r.a.createElement(x.a,{edge:"start",color:"primary",checked:l})),r.a.createElement(q.a,{className:t.progress,primary:a,secondary:"".concat(o," voted")}),r.a.createElement(k.a,null,c&&r.a.createElement(C.a,{edge:"end",size:"small",onClick:function(){return i(n)}},r.a.createElement(B.a,null))))}var M=n(175);function z(e){var t=e.createPollOption,n=Object(a.useState)(""),o=Object(c.a)(n,2),l=o[0],i=o[1],m=Object(a.useState)(!1),u=Object(c.a)(m,2),s=u[0],d=u[1];return r.a.createElement(D.a,null,r.a.createElement(q.a,{inset:!0},r.a.createElement(I.a,{error:s,size:"small",fullWidth:!0,variant:"outlined",value:l,onChange:function(e){d(!1),i(e.target.value)}})),r.a.createElement(k.a,null,r.a.createElement(C.a,{edge:"end",size:"small",onClick:function(){l?(t(l),i("")):d(!0)}},r.a.createElement(M.a,{color:"primary"}))))}function G(){var e=Object(b.a)(["\n    query GetOptionsByPollId($pollId: ID!) {\n        optionsByPollId(pollId: $pollId) {\n            id\n            option\n            tally\n        }\n    }\n"]);return G=function(){return e},e}var W=Object(v.gql)(G());function F(){var e=Object(b.a)(["\n    mutation CreatePollOption($pollId: ID!, $option: String!) {\n        createPollOption(pollId: $pollId, option: $option) {\n            id\n        }\n    }\n"]);return F=function(){return e},e}var L=Object(v.gql)(F());function Q(){var e=Object(b.a)(["\n    mutation DeletePollOption($id: ID!) {\n        deletePollOption(id: $id) {\n            id\n        }\n    }\n"]);return Q=function(){return e},e}var V=Object(v.gql)(Q());function T(){var e=Object(b.a)(["\n    query GetVote($employeeId: ID!, $pollId: ID!) {\n        vote(employeeId: $employeeId, pollId: $pollId) {\n            optionId\n        }\n    }\n"]);return T=function(){return e},e}var A=Object(v.gql)(T());function R(){var e=Object(b.a)(["\n    mutation SendVote($employeeId: ID!, $pollId: ID!, $optionId: ID!) {\n        sendVote(employeeId: $employeeId, pollId: $pollId, optionId: $optionId) {\n            employeeId\n            pollId\n            optionId\n        }\n    }\n"]);return R=function(){return e},e}var J=Object(v.gql)(R());function H(){var e=Object(b.a)(["\n    mutation DiscardVote($employeeId: ID!, $pollId: ID!) {\n        discardVote(employeeId: $employeeId, pollId: $pollId) {\n            employeeId\n            pollId\n            optionId\n        }\n    }\n"]);return H=function(){return e},e}var K=Object(v.gql)(H()),X=Object(i.a)((function(e){return{poll:{padding:e.spacing(2),marginTop:30,marginBottom:20,width:500},avatar:{marginLeft:e.spacing(1),marginRight:e.spacing(3)}}}));function Y(e){var t,n=e.employeeId,a=e.createdByEmployee,o=e.id,l=e.title,i=e.deletePoll,m=e.displayError,u=X(),d=Object(v.useQuery)(W,{variables:{pollId:o},fetchPolicy:"no-cache"}),p=d.data,I=d.refetch,b=d.error,g=Object(v.useQuery)(A,{variables:{employeeId:n,pollId:o},fetchPolicy:"no-cache"}),E=g.data,O=g.refetch,j=g.error,h=Object(v.useMutation)(L),D=Object(c.a)(h,2),w=D[0],x=D[1].error,q=Object(v.useMutation)(V),k=Object(c.a)(q,2),S=k[0],M=k[1].error,G=function(e){S({variables:{id:e}}),I(),O()},F=Object(v.useMutation)(J),Q=Object(c.a)(F,2),T=Q[0],R=Q[1].error,H=function(e){T({variables:{employeeId:n,pollId:o,optionId:e}}),I(),O()},Y=Object(v.useMutation)(K),Z=Object(c.a)(Y,2),_=Z[0],ee=Z[1].error,te=function(){_({variables:{employeeId:n,pollId:o}}),I(),O()};b?m(b):j?m(j):x?m(x):M?m(M):R?m(R):ee&&m(ee);var ne=p&&p.optionsByPollId?p.optionsByPollId:[],ae=null!==(t=ne.map((function(e){return e.tally})).reduce((function(e,t){return t+e}),0))&&void 0!==t?t:0,re=n===a.id;return r.a.createElement(y.a,{className:u.poll},r.a.createElement(f.a,{container:!0,spacing:1,alignItems:"center",justify:"center",alignContent:"center"},r.a.createElement(f.a,{item:!0,xs:10,container:!0,alignItems:"center",wrap:"nowrap"},r.a.createElement($.a,{className:u.avatar},a.firstName[0].toUpperCase()+a.lastName[0].toUpperCase()),r.a.createElement(s.a,{noWrap:!0},l)),r.a.createElement(f.a,{item:!0,xs:2,container:!0,justify:"flex-end"},re&&r.a.createElement(C.a,{size:"small",onClick:function(){return i(o)}},r.a.createElement(B.a,null))),r.a.createElement(f.a,{item:!0,xs:12},r.a.createElement(P.a,null)),r.a.createElement(f.a,{item:!0,xs:12},r.a.createElement(N.a,{dense:!0},ne&&ne.map((function(e,t){return r.a.createElement(U,Object.assign({key:t,selected:void 0!==E&&null!==E.vote&&E.vote.optionId===e.id,total:ae,canDelete:re,deletePollOption:G,vote:H,unvote:te},e))})),r.a.createElement(z,{createPollOption:function(e){w({variables:{pollId:o,option:e}}),I(),O()}})))))}var Z=Object(i.a)((function(e){return{newPoll:{padding:e.spacing(2),marginTop:20,marginBottom:20,width:500},avatar:{marginLeft:e.spacing(1),marginRight:e.spacing(3)}}}));function _(e){var t=e.employee,n=e.createPoll,o=Z(),l=Object(a.useState)(""),i=Object(c.a)(l,2),m=i[0],u=i[1],s=Object(a.useState)(!1),p=Object(c.a)(s,2),v=p[0],b=p[1];return r.a.createElement(y.a,{className:o.newPoll},r.a.createElement(f.a,{container:!0,spacing:1,alignItems:"center",justify:"center",alignContent:"center"},r.a.createElement(f.a,{item:!0,xs:12,container:!0,alignItems:"center",wrap:"nowrap"},r.a.createElement($.a,{className:o.avatar},t.firstName[0].toUpperCase()+t.lastName[0].toUpperCase()),r.a.createElement(I.a,{error:v,fullWidth:!0,size:"small",variant:"outlined",onChange:function(e){b(!1),u(e.target.value)},value:m})),r.a.createElement(f.a,{item:!0,xs:12},r.a.createElement(P.a,null)),r.a.createElement(f.a,{item:!0,xs:12,container:!0,justify:"flex-end"},r.a.createElement(d.a,{variant:"contained",color:"primary",onClick:function(){m?(n(m),u("")):b(!0)}},"Create poll"))))}function ee(){var e=Object(b.a)(["\n    query GetPollsByCompanyId($companyId: ID!) {\n        pollsByCompanyId(companyId: $companyId) {\n            id\n            title\n            createdByEmployee {\n                id\n                firstName\n                lastName\n            }\n        }\n    }\n"]);return ee=function(){return e},e}var te=Object(v.gql)(ee());function ne(){var e=Object(b.a)(["\n    mutation CreatePoll($companyId: ID!, $title: String!, $createdByEmployeeId: ID!) {\n        createPoll(companyId: $companyId, title: $title, createdByEmployeeId: $createdByEmployeeId) {\n            id\n        }\n    }\n"]);return ne=function(){return e},e}var ae=Object(v.gql)(ne());function re(){var e=Object(b.a)(["\n    mutation DeletePoll($id: ID!) {\n        deletePoll(id: $id) {\n            id\n        }\n    }\n"]);return re=function(){return e},e}var oe=Object(v.gql)(re());function le(e){var t=e.employee,n=e.displayError,a=Object(v.useQuery)(te,{variables:{companyId:t.companyId},fetchPolicy:"no-cache"}),o=a.data,l=a.refetch,i=a.error,m=Object(v.useMutation)(ae),u=Object(c.a)(m,2),s=u[0],d=u[1].error,p=Object(v.useMutation)(oe),y=Object(c.a)(p,2),f=y[0],I=y[1].error,b=function(e){f({variables:{id:e}}),l()};i?n(i):d?n(d):I&&n(I);var g=o&&o.pollsByCompanyId?o.pollsByCompanyId:[];return r.a.createElement(h.a,{display:"flex",flexDirection:"column",alignItems:"center"},r.a.createElement(_,{employee:t,createPoll:function(e){s({variables:{companyId:t.companyId,title:e,createdByEmployeeId:t.id}}),l()}}),g.map((function(e){return r.a.createElement(Y,Object.assign({employeeId:t.id,key:e.id,deletePoll:b,displayError:n},e))})))}var ce=n(182),ie=Object(i.a)((function(e){return{offset:e.mixins.toolbar,root:{flexGrow:1},title:{flexGrow:1}}}));function me(){var e=ie(),t=Object(a.useState)(void 0),n=Object(c.a)(t,2),o=n[0],l=n[1],i=Object(a.useState)(void 0),y=Object(c.a)(i,2),f=y[0],I=y[1],v=Object(a.useState)(!1),b=Object(c.a)(v,2),g=b[0],E=b[1],O=function(e){I(e),f!==e&&E(!0)},h=function(e){E(!1)};return r.a.createElement("div",{className:e.root},r.a.createElement(m.a,{position:"fixed"},r.a.createElement(u.a,null,r.a.createElement(s.a,{className:e.title,variant:"h6"},"Sample GraphQL Client"),o&&r.a.createElement(d.a,{color:"inherit",onClick:function(){l(void 0)}},"Logout"))),r.a.createElement("div",{className:e.offset}),o?r.a.createElement(le,{employee:o,displayError:O}):r.a.createElement(j,{setEmployee:l,displayError:O}),r.a.createElement(p.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:g,autoHideDuration:6e3,onClose:h},r.a.createElement(ce.a,{elevation:6,variant:"filled",onClose:h,severity:"error"},"An error has occurred: ".concat(f))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(131);var ue=new v.ApolloClient({uri:"http://localhost:54321/graphql",cache:new v.InMemoryCache});l.a.render(r.a.createElement(v.ApolloProvider,{client:ue},r.a.createElement(me,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[117,1,2]]]);
//# sourceMappingURL=main.c20b7be6.chunk.js.map